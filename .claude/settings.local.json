{
  "permissions": {
    "allow": [
      "Bash(npx prisma migrate:*)",
      "Bash(npx prisma db push:*)",
      "Bash(npx prisma generate:*)",
      "Bash(npx ts-node:*)",
      "Bash(npm run build:*)",
      "Bash(find:*)",
      "Bash(curl:*)",
      "Bash(npm run:*)",
      "Bash(lsof:*)",
      "Bash(xargs kill:*)",
      "Bash(cat:*)",
      "Bash(PRISMA_USER_CONSENT_FOR_DANGEROUS_AI_ACTION=\"yes\" npx prisma migrate:*)",
      "Bash(npx prisma db seed)",
      "Bash(pkill:*)",
      "Bash(tee:*)",
      "Bash(jq:*)",
      "Bash(bash:*)",
      "Bash(npx prisma db execute:*)",
      "Bash(psql:*)",
      "Bash(npx nest g module:*)",
      "Bash(npx @nestjs/cli g module:*)",
      "Bash(npx @nestjs/cli g service:*)",
      "Bash(npx @nestjs/cli g controller:*)",
      "Bash(npm --prefix backend run build)",
      "Bash(ls:*)",
      "Bash(npm install)",
      "Bash(redis-cli:*)",
      "Bash(npm install:*)",
      "Bash(for file in UnifiedTransactionForm.tsx TransactionCardList.tsx TransactionCard.tsx MultiItemCardSelector.tsx)",
      "Bash(do sed -i '' \"s|from ''@/utils/cn''|from ''@/utils''|g\" \"$file\")",
      "Bash(done)",
      "Bash(git restore:*)",
      "Bash(git checkout:*)",
      "Bash(python3:*)",
      "Bash(npx prisma validate:*)",
      "Bash(npx prisma:*)",
      "Bash(export LC_ALL=C)",
      "Bash(tree:*)",
      "Bash(xargs:*)",
      "Bash(npx tsc:*)",
      "Bash(grep:*)",
      "Bash(wc:*)",
      "Bash(npx tsx:*)",
      "Bash(while read file)",
      "Bash(npm --prefix /Volumes/SSD/project/turath_almandi/frontend run build)",
      "Bash(git add:*)",
      "Bash(git commit -m \"$(cat <<''EOF''\nfeat: Create unified Dialog components system for better code reusability\n\n## Summary\n\nIntroduced a comprehensive Dialog components system to eliminate repetition and improve consistency across the application:\n\n### Components Created\n- **FormDialog** - Unified form dialog with configurable width, description, and RTL/dark mode support\n- **ConfirmDialog** - Unified confirmation dialog for delete/confirm actions with loading states\n- **useDialog** - Custom hook for managing dialog state and data with support for multiple dialogs\n\n### Key Features\n- Props-based control for consistency\n- Full RTL support for Arabic UI\n- Dark mode support with semantic colors\n- Accessibility (ARIA attributes, keyboard navigation)\n- Smooth animations and transitions\n- Simple API that reduces boilerplate by ~40%\n\n### Files Created\n- frontend/src/components/shared/FormDialog.tsx\n- frontend/src/components/shared/ConfirmDialog.tsx\n- frontend/src/hooks/useDialog.ts\n- frontend/DIALOG_COMPONENTS.md (comprehensive guide)\n- frontend/DIALOG_REFACTORING_PLAN.md (implementation roadmap)\n- frontend/DIALOG_EXAMPLES.md (practical examples)\n\n### Fixed Issues\n- Fixed AdjustmentForm submission using mutateAsync + async/await pattern\n- Updated EmployeeDetailPage to use FormDialog\n- Fixed React Query v5 callback handling in form submissions\n\n### Testing\n- Build passes without errors\n- All components properly exported\n- Type safety maintained\n\n### Next Steps\n- Refactor Receivables module dialogs\n- Refactor Payables module dialogs\n- Refactor Inventory module dialogs\n- Refactor Contacts, Branches, and Users dialogs\n- See DIALOG_REFACTORING_PLAN.md for detailed steps\n\nðŸ¤– Generated with Claude Code\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git commit -m \"$(cat <<''EOF''\nrefactor: Replace all hardcoded dialogs with unified FormDialog component\n\n## Summary\n\nUnified all Dialog implementations across the application to use the centralized FormDialog and ConfirmDialog components, reducing code duplication by ~50% and improving consistency.\n\n### Refactored Modules\n\n#### Receivables Module\n- ReceivableCollectDialog - Now uses FormDialog with proper maxWidth\n- ReceivableForm - Replaced Dialog imports with FormDialog\n\n#### Payables Module  \n- PayablePaymentDialog - Now uses FormDialog\n- PayableForm - Replaced Dialog imports with FormDialog\n\n#### Inventory Module\n- AddEditItemDialog - Migrated to FormDialog\n- RecordConsumptionDialog - Migrated to FormDialog\n- ConsumptionHistoryDialog - Migrated to FormDialog (view-only dialog)\n\n#### Contacts Module\n- ContactForm - Replaced Dialog imports with FormDialog\n\n#### Branches Module\n- BranchForm - Replaced Dialog imports with FormDialog\n\n#### Users/Settings Module\n- UserForm - Replaced Dialog imports with FormDialog\n\n### Key Changes\n\n1. **Removed direct Dialog imports**: Replaced all hardcoded Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter imports with FormDialog\n2. **Updated JSX structure**: Changed from manual Dialog wrapper to <FormDialog> with props\n3. **RTL Support**: Updated all Loader2 icon margins from mr-2/ml-2 to me-2 for proper RTL rendering\n4. **Footer buttons**: Replaced DialogFooter with `<div className=\"flex justify-end gap-2\">` for consistent styling\n\n### Benefits\n\nâœ… Code reduction: ~50% less boilerplate for dialogs\nâœ… Consistent styling across all dialogs\nâœ… Automatic dark mode support\nâœ… Full RTL support for Arabic UI\nâœ… Accessibility maintained (ARIA, keyboard navigation)\nâœ… Smooth animations and transitions\n\n### Files Modified\n\n**Receivables:**\n- src/pages/receivables/components/ReceivableCollectDialog.tsx\n- src/pages/receivables/components/ReceivableForm.tsx\n\n**Payables:**\n- src/pages/payables/components/PayablePaymentDialog.tsx\n- src/pages/payables/components/PayableForm.tsx\n\n**Inventory:**\n- src/pages/inventory/components/AddEditItemDialog.tsx\n- src/pages/inventory/components/RecordConsumptionDialog.tsx\n- src/pages/inventory/components/ConsumptionHistoryDialog.tsx\n\n**Contacts:**\n- src/pages/contacts/components/ContactForm.tsx\n\n**Branches:**\n- src/pages/branches/components/BranchForm.tsx\n\n**Users:**\n- src/pages/settings/users/components/UserForm.tsx\n\n### Testing\n\nâœ… Build passes without errors\nâœ… All components properly refactored\nâœ… Type safety maintained\nâœ… No breaking changes to page logic\n\nðŸ¤– Generated with Claude Code\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(npm --prefix frontend run build)",
      "Bash(git commit:*)"
    ],
    "deny": [],
    "ask": []
  }
}
